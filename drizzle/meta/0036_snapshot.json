{
  "id": "8cf36e8c-4c11-4d02-89b6-9ebc912251e7",
  "prevId": "95890f92-25a4-43e2-bfc5-e2023bc1337c",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.book_covers": {
      "name": "book_covers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_used": {
          "name": "prompt_used",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "generation_id": {
          "name": "generation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_selected": {
          "name": "is_selected",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "title_text": {
          "name": "title_text",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "subtitle_text": {
          "name": "subtitle_text",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "author_text": {
          "name": "author_text",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "back_cover_text": {
          "name": "back_cover_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tagline": {
          "name": "tagline",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "characters_shown": {
          "name": "characters_shown",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "locations_shown": {
          "name": "locations_shown",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "style_snapshot": {
          "name": "style_snapshot",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "layout_notes": {
          "name": "layout_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "book_covers_generation_idx": {
          "name": "book_covers_generation_idx",
          "columns": [
            {
              "expression": "generation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "book_covers_story_idx": {
          "name": "book_covers_story_idx",
          "columns": [
            {
              "expression": "story_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "book_covers_story_id_stories_id_fk": {
          "name": "book_covers_story_id_stories_id_fk",
          "tableFrom": "book_covers",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.character_relationships": {
      "name": "character_relationships",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "character_id": {
          "name": "character_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "related_character_id": {
          "name": "related_character_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_type": {
          "name": "relationship_type",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "character_relationships_story_id_stories_id_fk": {
          "name": "character_relationships_story_id_stories_id_fk",
          "tableFrom": "character_relationships",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "character_relationships_character_id_characters_id_fk": {
          "name": "character_relationships_character_id_characters_id_fk",
          "tableFrom": "character_relationships",
          "tableTo": "characters",
          "columnsFrom": [
            "character_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "character_relationships_related_character_id_characters_id_fk": {
          "name": "character_relationships_related_character_id_characters_id_fk",
          "tableFrom": "character_relationships",
          "tableTo": "characters",
          "columnsFrom": [
            "related_character_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.characters": {
      "name": "characters",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "appearance": {
          "name": "appearance",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_summary": {
          "name": "ai_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "visual_details": {
          "name": "visual_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "personality_traits": {
          "name": "personality_traits",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "locked": {
          "name": "locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "locked_at": {
          "name": "locked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "portrait_image_url": {
          "name": "portrait_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "full_body_image_url": {
          "name": "full_body_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_image_url": {
          "name": "reference_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "characters_user_id_users_id_fk": {
          "name": "characters_user_id_users_id_fk",
          "tableFrom": "characters",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chat_messages": {
      "name": "chat_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "chat_messages_session_id_chat_sessions_id_fk": {
          "name": "chat_messages_session_id_chat_sessions_id_fk",
          "tableFrom": "chat_messages",
          "tableTo": "chat_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chat_sessions": {
      "name": "chat_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "reader_id": {
          "name": "reader_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'open'"
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "chat_sessions_project_id_projects_id_fk": {
          "name": "chat_sessions_project_id_projects_id_fk",
          "tableFrom": "chat_sessions",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "chat_sessions_reader_id_readers_id_fk": {
          "name": "chat_sessions_reader_id_readers_id_fk",
          "tableFrom": "chat_sessions",
          "tableTo": "readers",
          "columnsFrom": [
            "reader_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "chat_sessions_user_id_users_id_fk": {
          "name": "chat_sessions_user_id_users_id_fk",
          "tableFrom": "chat_sessions",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.cover_chat_messages": {
      "name": "cover_chat_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "cover_chat_messages_session_id_cover_chat_sessions_id_fk": {
          "name": "cover_chat_messages_session_id_cover_chat_sessions_id_fk",
          "tableFrom": "cover_chat_messages",
          "tableTo": "cover_chat_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.cover_chat_sessions": {
      "name": "cover_chat_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "cover_chat_sessions_story_id_stories_id_fk": {
          "name": "cover_chat_sessions_story_id_stories_id_fk",
          "tableFrom": "cover_chat_sessions",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.locations": {
      "name": "locations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_summary": {
          "name": "ai_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "visual_details": {
          "name": "visual_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "locked": {
          "name": "locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "locked_at": {
          "name": "locked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "portrait_image_url": {
          "name": "portrait_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reference_image_url": {
          "name": "reference_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "locations_user_id_users_id_fk": {
          "name": "locations_user_id_users_id_fk",
          "tableFrom": "locations",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.narrative_beats": {
      "name": "narrative_beats",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "start_page": {
          "name": "start_page",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "end_page": {
          "name": "end_page",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "beat_type": {
          "name": "beat_type",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "emotional_tone": {
          "name": "emotional_tone",
          "type": "varchar(60)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "narrative_beats_story_id_stories_id_fk": {
          "name": "narrative_beats_story_id_stories_id_fk",
          "tableFrom": "narrative_beats",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.orders": {
      "name": "orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payment_id": {
          "name": "payment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payment_status": {
          "name": "payment_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "amount": {
          "name": "amount",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'USD'"
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "shipping_address": {
          "name": "shipping_address",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "gelato_order_id": {
          "name": "gelato_order_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "gelato_status": {
          "name": "gelato_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "story_product_id": {
          "name": "story_product_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "submitted_at": {
          "name": "submitted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "orders_story_id_stories_id_fk": {
          "name": "orders_story_id_stories_id_fk",
          "tableFrom": "orders",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "orders_story_product_id_story_products_id_fk": {
          "name": "orders_story_product_id_story_products_id_fk",
          "tableFrom": "orders",
          "tableTo": "story_products",
          "columnsFrom": [
            "story_product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.page_entities": {
      "name": "page_entities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "page_id": {
          "name": "page_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "page_entities_page_id_story_pages_id_fk": {
          "name": "page_entities_page_id_story_pages_id_fk",
          "tableFrom": "page_entities",
          "tableTo": "story_pages",
          "columnsFrom": [
            "page_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.page_images": {
      "name": "page_images",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "page_id": {
          "name": "page_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_used": {
          "name": "prompt_used",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "seed": {
          "name": "seed",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "page_images_page_id_story_pages_id_fk": {
          "name": "page_images_page_id_story_pages_id_fk",
          "tableFrom": "page_images",
          "tableTo": "story_pages",
          "columnsFrom": [
            "page_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.projects": {
      "name": "projects",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "story_brief": {
          "name": "story_brief",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "story_base_prompt": {
          "name": "story_base_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "full_ai_story": {
          "name": "full_ai_story",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "projects_user_id_users_id_fk": {
          "name": "projects_user_id_users_id_fk",
          "tableFrom": "projects",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.readers": {
      "name": "readers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": false
        },
        "dob": {
          "name": "dob",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        },
        "relationship": {
          "name": "relationship",
          "type": "varchar(80)",
          "primaryKey": false,
          "notNull": false
        },
        "gender": {
          "name": "gender",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        },
        "ai_summary": {
          "name": "ai_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "readers_user_id_users_id_fk": {
          "name": "readers_user_id_users_id_fk",
          "tableFrom": "readers",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "readers_project_id_projects_id_fk": {
          "name": "readers_project_id_projects_id_fk",
          "tableFrom": "readers",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.scene_transitions": {
      "name": "scene_transitions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "from_page": {
          "name": "from_page",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "to_page": {
          "name": "to_page",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "transition_type": {
          "name": "transition_type",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "time_delta": {
          "name": "time_delta",
          "type": "varchar(60)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "scene_transitions_story_id_stories_id_fk": {
          "name": "scene_transitions_story_id_stories_id_fk",
          "tableFrom": "scene_transitions",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.stories": {
      "name": "stories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tone": {
          "name": "tone",
          "type": "varchar(80)",
          "primaryKey": false,
          "notNull": false
        },
        "length": {
          "name": "length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "full_draft": {
          "name": "full_draft",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cover_image_url": {
          "name": "cover_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'planning'"
        },
        "story_confirmed": {
          "name": "story_confirmed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "payment_status": {
          "name": "payment_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "payment_id": {
          "name": "payment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "front_cover_prompt": {
          "name": "front_cover_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "back_cover_prompt": {
          "name": "back_cover_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "front_cover_url": {
          "name": "front_cover_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "back_cover_url": {
          "name": "back_cover_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_url": {
          "name": "pdf_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pdf_updated_at": {
          "name": "pdf_updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "order_status": {
          "name": "order_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'not_ready'"
        },
        "current_step": {
          "name": "current_step",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "completed_steps": {
          "name": "completed_steps",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "stories_project_id_projects_id_fk": {
          "name": "stories_project_id_projects_id_fk",
          "tableFrom": "stories",
          "tableTo": "projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_characters": {
      "name": "story_characters",
      "schema": "",
      "columns": {
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "character_id": {
          "name": "character_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        },
        "arc_summary": {
          "name": "arc_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_characters_story_id_stories_id_fk": {
          "name": "story_characters_story_id_stories_id_fk",
          "tableFrom": "story_characters",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_characters_character_id_characters_id_fk": {
          "name": "story_characters_character_id_characters_id_fk",
          "tableFrom": "story_characters",
          "tableTo": "characters",
          "columnsFrom": [
            "character_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_intent": {
      "name": "story_intent",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "primary_purpose": {
          "name": "primary_purpose",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "intended_recipient": {
          "name": "intended_recipient",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "emotional_tone": {
          "name": "emotional_tone",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "occasion": {
          "name": "occasion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "permanence_level": {
          "name": "permanence_level",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "things_to_emphasise": {
          "name": "things_to_emphasise",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "things_to_avoid": {
          "name": "things_to_avoid",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "author_perspective": {
          "name": "author_perspective",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_intent_story_id_stories_id_fk": {
          "name": "story_intent_story_id_stories_id_fk",
          "tableFrom": "story_intent",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "story_intent_story_id_unique": {
          "name": "story_intent_story_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "story_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_locations": {
      "name": "story_locations",
      "schema": "",
      "columns": {
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "location_id": {
          "name": "location_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "significance": {
          "name": "significance",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_locations_story_id_stories_id_fk": {
          "name": "story_locations_story_id_stories_id_fk",
          "tableFrom": "story_locations",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_locations_location_id_locations_id_fk": {
          "name": "story_locations_location_id_locations_id_fk",
          "tableFrom": "story_locations",
          "tableTo": "locations",
          "columnsFrom": [
            "location_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_page_characters": {
      "name": "story_page_characters",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "page_id": {
          "name": "page_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "character_id": {
          "name": "character_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "canonical": {
          "name": "canonical",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "source": {
          "name": "source",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'ai'"
        },
        "emotional_state": {
          "name": "emotional_state",
          "type": "varchar(60)",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prominence": {
          "name": "prominence",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_page_characters_page_id_story_pages_id_fk": {
          "name": "story_page_characters_page_id_story_pages_id_fk",
          "tableFrom": "story_page_characters",
          "tableTo": "story_pages",
          "columnsFrom": [
            "page_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_page_characters_character_id_characters_id_fk": {
          "name": "story_page_characters_character_id_characters_id_fk",
          "tableFrom": "story_page_characters",
          "tableTo": "characters",
          "columnsFrom": [
            "character_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_page_locations": {
      "name": "story_page_locations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "page_id": {
          "name": "page_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "location_id": {
          "name": "location_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "canonical": {
          "name": "canonical",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "source": {
          "name": "source",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'ai'"
        },
        "specific_area": {
          "name": "specific_area",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "visual_focus": {
          "name": "visual_focus",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_page_locations_page_id_story_pages_id_fk": {
          "name": "story_page_locations_page_id_story_pages_id_fk",
          "tableFrom": "story_page_locations",
          "tableTo": "story_pages",
          "columnsFrom": [
            "page_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_page_locations_location_id_locations_id_fk": {
          "name": "story_page_locations_location_id_locations_id_fk",
          "tableFrom": "story_page_locations",
          "tableTo": "locations",
          "columnsFrom": [
            "location_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_pages": {
      "name": "story_pages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "page_number": {
          "name": "page_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "illustration_prompt": {
          "name": "illustration_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "image_id": {
          "name": "image_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "time_of_day": {
          "name": "time_of_day",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        },
        "weather": {
          "name": "weather",
          "type": "varchar(60)",
          "primaryKey": false,
          "notNull": false
        },
        "atmosphere": {
          "name": "atmosphere",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "scene_type": {
          "name": "scene_type",
          "type": "varchar(40)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_pages_story_id_stories_id_fk": {
          "name": "story_pages_story_id_stories_id_fk",
          "tableFrom": "story_pages",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_products": {
      "name": "story_products",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "product_type": {
          "name": "product_type",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": false,
          "default": "'undecided'"
        },
        "estimated_price": {
          "name": "estimated_price",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "currency": {
          "name": "currency",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false,
          "default": "'GBP'"
        },
        "requires_shipping": {
          "name": "requires_shipping",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "requires_pdf": {
          "name": "requires_pdf",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "locked": {
          "name": "locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "locked_at": {
          "name": "locked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_products_story_id_stories_id_fk": {
          "name": "story_products_story_id_stories_id_fk",
          "tableFrom": "story_products",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_spreads": {
      "name": "story_spreads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "spread_index": {
          "name": "spread_index",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "scene_summary": {
          "name": "scene_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "left_page_id": {
          "name": "left_page_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "right_page_id": {
          "name": "right_page_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_spreads_story_id_stories_id_fk": {
          "name": "story_spreads_story_id_stories_id_fk",
          "tableFrom": "story_spreads",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "story_spreads_left_page_id_story_pages_id_fk": {
          "name": "story_spreads_left_page_id_story_pages_id_fk",
          "tableFrom": "story_spreads",
          "tableTo": "story_pages",
          "columnsFrom": [
            "left_page_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "story_spreads_right_page_id_story_pages_id_fk": {
          "name": "story_spreads_right_page_id_story_pages_id_fk",
          "tableFrom": "story_spreads",
          "tableTo": "story_pages",
          "columnsFrom": [
            "right_page_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.story_style_guide": {
      "name": "story_style_guide",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "story_id": {
          "name": "story_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "negative_prompt": {
          "name": "negative_prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_notes": {
          "name": "user_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "art_style": {
          "name": "art_style",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "color_palette": {
          "name": "color_palette",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "visual_themes": {
          "name": "visual_themes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sample_illustration_url": {
          "name": "sample_illustration_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "style_guide_image": {
          "name": "style_guide_image",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "story_style_guide_story_id_stories_id_fk": {
          "name": "story_style_guide_story_id_stories_id_fk",
          "tableFrom": "story_style_guide",
          "tableTo": "stories",
          "columnsFrom": [
            "story_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "story_style_guide_story_id_unique": {
          "name": "story_style_guide_story_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "story_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.style_guide_images": {
      "name": "style_guide_images",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "style_guide_id": {
          "name": "style_guide_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "style_guide_images_style_guide_id_story_style_guide_id_fk": {
          "name": "style_guide_images_style_guide_id_story_style_guide_id_fk",
          "tableFrom": "style_guide_images",
          "tableTo": "story_style_guide",
          "columnsFrom": [
            "style_guide_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "image": {
          "name": "image",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}